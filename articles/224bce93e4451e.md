---
title: "Zsh ã§ã‚³ãƒãƒ³ãƒ‰ã®çµ‚äº†ã‚³ãƒ¼ãƒ‰ãŒ0ä»¥å¤–ã®å ´åˆã«ç›®ç«‹ãŸã›ã‚‹"
emoji: "ğŸ«¢"
type: "tech"
topics: ["Zsh"]
published: true
---

ã¨ã‚ã‚‹æœ¬ã‚’å†™çµŒã—ã¦ã„ã¦ã€ã‚³ãƒãƒ³ãƒ‰å¤±æ•—ã‚’è¦‹é€ƒã—ã¦æ•°åˆ†ã‚’ç„¡é§„ã«ã—ã¾ã—ãŸã€‚
2ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é€£ç¶šã—ã¦å®Ÿè¡Œã—ã¦ã„ã¦ã€1ã¤ç›®ã‚’è¦‹é€ƒã—ã¾ã—ãŸã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¤ºã§ã™ã€‚(ã“ã®ä¸‹ã«2ã¤ç›®ã®ã‚³ãƒãƒ³ãƒ‰ã®çµæœãŒã‚‚ã£ã¨ç¶šã)

![](https://storage.googleapis.com/zenn-user-upload/fcb3d87b5fb0-20250107.png)

çµ‚äº†ã‚³ãƒ¼ãƒ‰(Exit Code) ãŒã‚‚ã£ã¨ç›®ç«‹ã¦ã°æ°—ã¥ã‘ãŸã‹ã‚‚ã—ã‚Œãªã„ã€ã¨æ€ã£ãŸã®ã§ã€ç›®ç«‹ãŸã›ã¦ã¿ã¾ã—ãŸã€‚

# ã‚·ã‚§ãƒ«å¤‰æ•° `PROMPT` ã‚’ç·¨é›†ã™ã‚‹

```
# .zshrc
PROMPT='%(?..
%B%F{black}%K{red}Exit Code: %?%k%f%b )
%% '
```

ç•°å¸¸çµ‚äº†æ™‚ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/b100977e0ff1-20250107.png)

å®Ÿéš›ã®è¨­å®šã§ã¯ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„gitãƒ–ãƒ©ãƒ³ãƒã‚‚è¡¨ç¤ºã•ã›ã¦ã„ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰é‡ã‚‚å¤šã„ã§ã™ã€‚

```
# Gité–¢é€£
autoload -Uz vcs_info
 setopt prompt_subst
 zstyle ':vcs_info:git:*' check-for-changes true
 zstyle ':vcs_info:git:*' stagedstr "%F{magenta}!"
 zstyle ':vcs_info:git:*' unstagedstr "%F{yellow}+"
 zstyle ':vcs_info:*' formats "%F{cyan}%c%u[%b]%f"
 zstyle ':vcs_info:*' actionformats '[%b|%a]'
 precmd () { vcs_info }

# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
PROMPT='%(?..
%B%F{black}%K{red}Exit Code: %?%k%f%b )
[%B%F{red}%n@mbp2021%f%b:%F{green}%~%f]%F{cyan}$vcs_info_msg_0_%f
%F{yellow}%%%f '
```

![](https://storage.googleapis.com/zenn-user-upload/bcf29195bae7-20250107.png)

# å‚è€ƒè³‡æ–™

https://myon.info/blog/2019/08/08/do-not-ignore-exit-status/
https://zenn.dev/ishihaya/articles/07c3b3c78baacd
